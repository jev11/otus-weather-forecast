(()=>{"use strict";function t(t,e){t.innerHTML=`<ul>${e.map((t=>`<li class="city">${t}</li>`)).join("")}</ul>`}function e(t,e){t.innerHTML=`<div>\n    <span>\n    ${e.name}\n    </span>\n    <span>\n    <img src=http://openweathermap.org/img/wn/${e.weather[0].icon}.png>\n    </span>\n    <span>\n    Temperature: ${Math.round(e.main.temp)}C\n    </span>\n    </div>`}async function n(t,e){try{const n=`https://api.openweathermap.org/\ndata/2.5/weather?units=metric&q=${t}&appid=${e}`,o=await fetch(n);return await o.json()}catch(t){return null}}function o(t,e,n,o){const a=`https://maps.googleapis.com/maps/api/staticmap?center=\n${e},${n}&zoom=12&size=400x400&key=${o}`;t.innerHTML=`<img src="${a}">`}const a="secrets.OPEN_WEATHER_KEY",c="secrets.GOOGLE_MAPS_KEY",r=document.querySelector(".history"),i=document.querySelector("input"),s=document.querySelector("button"),l=document.querySelector(".forecast"),u=document.querySelector(".map");let p,d;!async function(){const i=await function(t="https://get.geojs.io/v1/ip/geo.json"){return fetch(t).then((t=>t.json())).then((t=>t))}();d=await n(i.city,a),d&&(e(l,d),o(u,d.coord.lat,d.coord.lon,c)),p=await(JSON.parse(localStorage.getItem("cities"))||[]),t(r,p),r.querySelectorAll(".city").forEach((t=>{t.addEventListener("click",(async()=>{d=await n(t.innerHTML,a),d&&(e(l,d),o(u,d.coord.lat,d.coord.lon,c))}))}))}(),s.addEventListener("click",(async s=>{var m,y;s.preventDefault(),m=i.value,(y=p).unshift(m),y.length>10&&y.pop(),d=await n(i.value,a),i.value="",e(l,d),o(u,d.coord.lat,d.coord.lon,c),t(r,p),r.querySelectorAll(".city").forEach((t=>{t.addEventListener("click",(async()=>{d=await n(t.innerHTML,a),d&&(e(l,d),o(u,d.coord.lat,d.coord.lon,c))}))})),function(t){const e=JSON.stringify(t);localStorage.setItem("cities",e)}(p)}))})();