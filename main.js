(()=>{"use strict";function t(t,n){t.innerHTML=`<ul>${n.map((t=>`<li class="city">${t}</li>`)).join("")}</ul>`}function n(t,n){t.innerHTML=`<div>\n    <span>\n    ${n.name}\n    </span>\n    <span>\n    <img src=https://openweathermap.org/img/wn/${n.weather[0].icon}.png>\n    </span>\n    <span>\n    Temperature: ${Math.round(n.main.temp)}C\n    </span>\n    </div>`}async function e(t,n){try{const e=`https://api.openweathermap.org/\ndata/2.5/weather?units=metric&q=${t}&appid=${n}`,a=await fetch(e);return await a.json()}catch(t){return null}}function a(t,n,e,a){const c=`https://maps.googleapis.com/maps/api/staticmap?center=\n${n},${e}&zoom=12&size=400x400&key=${a}`;t.innerHTML=`<img src="${c}">`}const c="69c7e4c421845cddf495f67b63f6cc51",o="AIzaSyC9RYvd4Srwv8p0dEjkPUnHPRrKouz5lfQ",r=document.querySelector(".history"),i=document.querySelector("input"),s=document.querySelector("button"),l=document.querySelector(".forecast"),u=document.querySelector(".map");let p,d;!async function(){const i=await async function(t="https://get.geojs.io/v1/ip/geo.json"){try{const n=await fetch(t);return await n.json()}catch(t){return null}}();d=await e(i.city,c),d&&(n(l,d),a(u,d.coord.lat,d.coord.lon,o)),p=await(JSON.parse(localStorage.getItem("cities"))||[]),t(r,p),r.querySelectorAll(".city").forEach((t=>{t.addEventListener("click",(async()=>{d=await e(t.innerHTML,c),d&&(n(l,d),a(u,d.coord.lat,d.coord.lon,o))}))}))}(),s.addEventListener("click",(async s=>{var m,y;s.preventDefault(),d=await e(i.value,c),d&&(m=i.value,(y=p).unshift(m),y.length>10&&y.pop(),n(l,d),a(u,d.coord.lat,d.coord.lon,o),t(r,p)),i.value="",r.querySelectorAll(".city").forEach((t=>{t.addEventListener("click",(async()=>{d=await e(t.innerHTML,c),d&&(n(l,d),a(u,d.coord.lat,d.coord.lon,o))}))})),function(t){const n=JSON.stringify(t);localStorage.setItem("cities",n)}(p)}))})();